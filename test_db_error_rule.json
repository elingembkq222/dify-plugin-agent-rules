{
  "id": "test_db_error",
  "target": "product",
  "name": "测试数据库错误",
  "description": "测试数据库表不存在时的错误处理",
  "applies_when": [],
  "requires": [
    {
      "name": "transaction_count",
      "type": "database",
      "source": "business_db",
      "query": "SELECT COUNT(*) as count FROM transactions"
    }
  ],
  "rules": [
    {
      "id": "check_transaction_count",
      "expression": {
        "type": "operation",
        "operator": ">",
        "left": {
          "type": "field",
          "field": "transaction_count"
        },
        "right": 0
      },
      "message": "交易数量应大于0"
    }
  ],
  "on_fail": {
    "type": "return",
    "value": {
      "valid": false,
      "reason": "数据库验证失败"
    }
  }
}